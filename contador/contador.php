<?php $ruta_ip='ips.txt';    if (file_exists($ruta_ip)){$ips = explode(';', file_get_contents($ruta_ip));//Explode devuelve un array, lo separa por el ; y file_get_contents() lee el fichero ips.txt y lo convierte en cadena string$visitas = count($ips)-2;// Cuenta el numero de  elementos del array  y le resta 2 por el time() y el final de fichero$dias=365;// reset expresado en días.$reset =$dias*24*60*60;// Cada cuanto tiempo se resetea el contador, expresado en segundos//settype($visitas, 'string');//Convierte el contador en una cadena.if ((time() - reset($ips)) > $reset) {//Resta el tiempo anterior (fichero ips.txt) al actual, si es mayor que $reset en segundos, crea el fichero de nuevo con el tiempo actual.                  file_put_contents($ruta_ip, time() . ';');        }//Escribe en el fichero el tiempo actual y el separador ;	if (!in_array($_SERVER['REMOTE_ADDR'], $ips)) { // Comprueba que la ip que visita la web no esta en el array            file_put_contents($ruta_ip, $_SERVER['REMOTE_ADDR'] . ';', FILE_APPEND);        }//Si no esta la añade al fichero de ips.txt, con el separador ;	 		echo '<b>'.$visitas.'</b>';}else{	    		file_put_contents($ruta_ip, time() . ';');//Escribe en el fichero el tiempo actual y el separador ;		file_put_contents($ruta_ip, $_SERVER['REMOTE_ADDR'] . ';', FILE_APPEND);//Añade la ip al fichero de ips.txt, con el separador ;        $visitas=1;		echo '<b>'.$visitas.'</b>';}//echo $_SERVER["HTTP_USER_AGENT"].'</br>';//echo $_SERVER['REMOTE_ADDR'].'</br>';	?>